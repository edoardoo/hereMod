
function loadScript(url, callback)
{
    // Adding the script tag to the head as suggested before
    var head = document.getElementsByTagName('head')[0];
    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.src = url;

    // Then bind the event to the callback function.
    // There are several events for cross browser compatibility.
    script.onreadystatechange = callback;
    script.onload = callback;

    // Fire the loading
    head.appendChild(script);
}

function show_loading(){
    var style = "<style>.rotate{-webkit-transition-property:-webkit-transform;-webkit-transition-duration:1s;-moz-transition-property:-moz-transform;-moz-transition-duration:1s;-webkit-animation-name:rotate;-webkit-animation-duration:3s;-webkit-animation-iteration-count:infinite;-webkit-animation-timing-function:linear;-moz-animation-name:rotate;-moz-animation-duration:3s;-moz-animation-iteration-count:infinite;-moz-animation-timing-function:linear}@-webkit-keyframes rotate{from{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(360deg)}}@-moz-keyframes rotate{from{-moz-transform:rotate(0deg)}to{-moz-transform:rotate(360deg)}}</style>";
    $("head").append(style);
    $("#service_switcher .herelogo").addClass('rotate');
}

function hide_loading(){
    $("#service_switcher .herelogo").removeClass('rotate');
}
function clean_code(code){
    return code = code.replace(/<(\/)?html.*>/g, '')
        .replace(/<head([^.]|[.])*\/head>/g, '')
        .replace(/<(\/)?body.*>/g, '')
        .replace(/<!doctype.*>/g, '')
        .replace('"use strict";','');
}

var setStuff = function (){

    show_loading();

    $.ajax({
    url: 'https://www.here.com',
    success: function(code){
        // console.dir(a.data)
        var tags = '<script>@</script>'
        //var modules = 'angular.module(\"hereApp.collections\").controller(\"CollectionDetailCtrl\",[\"$scope\",\"$routeParams\",\"$location\",\"$timeout\",\"CollectionsService\",\"COLLECTION_NAME_SIZE\",\"mapContainers\",\"markerService\",\"collectionsHelper\",\"PBAPI\",\"PreloadImage\",\"ensureHTTPSFilter\",\"RedirectService\",\"herePageTitle\",\"hereBrowser\",\"Features\",\"TrackingService\",\"panelsService\",\"User\",function(e,t,i,o,n,a,l,c,r,s,d,p,u,f,v,g,m,h,I){var y,S,M={},k=l.favorites,w=angular.noop,C=[\"w300\",\"w700\"],D=function(){M={},l.clearContainer(k),l.showOnly(l.favorites)};f.set(),m.track(\"collections\",\"collection opened\",\"\",null),e.showUpdateErrorNotification=!1,e.COLLECTION_NAME_SIZE=a,e.isVirtual=!0,e.images={},i.search().edit&&(e.editMode=!0,i.search(\"edit\",null).replace()),i.search().favedit&&i.search(\"favedit\",null).replace(),e.highlighted=null,e.hasNoDescription=!0,e.LIMIT_DESCRIPTION=250,e.updateObj={},e.favorites=[],e.imagesAvailable=[],e.state={editMode:!1,editDescription:!1,confirmDelete:null},e.displayOtherCollectionsFavorites=function(e){l.clearContainer(l.favoritesSmall),n.getAllFavorites().then(function(t){var i,o=[],n=[];e.forEach(function(e){e.placesId&&n.push(e.placesId)}),t.forEach(function(e){e.placesId&&-1===n.indexOf(e.placesId)&&(i=r.createSmallFavoriteMarker(e),i&&(o.push(i),M[e.id]=c.getWrapped(i)))}),o.length&&(l.favoritesSmall.addObjects(o),l.favoritesSmall.setVisibility(!0))})};var F=function(){n.getFavorites(t.collectionId).then(function(o){var n=[];console.dir(o),e.favorites=o,g.collections.alwaysVisible&&e.displayOtherCollectionsFavorites(e.favorites),e.loadingFavorites=!1,D(),e.favorites.length?(e.collection.total=e.favorites.length,e.favorites.forEach(function(t){t.placesId&&s.images({id:t.placesId,image_dimensions:C.join(\",\")}).then(function(i){i.data&&i.data.available&&(e.imagesAvailable.push(t.id),e.images[t.placesId]={src:p(i.data.items[0].dimensions[C[0]])},d.single(e.images[t.placesId].src).then(function(){e.images[t.placesId].loaded=!0}))});var i=r.createFavoriteMarker(t,function(){e.$apply(function(){e.highlighted=t})},function(){e.$apply(function(){e.highlighted=null})});i&&(n.push(i),M[t.id]=c.getWrapped(i))}),n.length&&(k.addObjects(n),y.setViewBounds(k.getBounds())),w=e.$watch(\"favorites.length\",function(){e.favorites&&(0===e.favorites.length?(\"unsorted\"===t.collectionId&&i.path(\"\/collections\"),e.emptyFavorites=!0,e.state.editDescription=!1):e.emptyFavorites=!1)})):(\"unsorted\"===t.collectionId&&i.path(\"\/collections\"),e.emptyFavorites=!0)})};e.loadingDetail=!0,e.loadingFavorites=!0,S=function(){return I.isLoggedIn()?(n.getCollectionById(t.collectionId).then(function(t){e.collection=t,e.loadingDetail=!1,e.isVirtual=n.isCollectionVirtual(t)},function(){i.path(\"\/collections\")}),void o(F,1e3)):void i.path(\"\/collections\")},e.whenMapIsReady.then(function(e){y=e,S(),l.showOnly(k)}),e.getImageStyles=function(t){var i={};return t.placesId&&e.images[t.placesId]&&(i={\"background-image\":\"url(\"+e.images[t.placesId].src+\")\"},e.images[t.placesId].loaded&&(i.opacity=1)),i},e.isCity=function(e){return\"city-town-village\"===e.category},e.showEditor=function(){e.collection.description?(e.updateObj.description=angular.copy(e.collection.description),e.hasNoDescription=!1):e.hasNoDescription=!0,e.state.errorDescription=!1,e.state.editDescription=!0},e.hideEditor=function(){e.updateObj.description=null,e.state.errorDescription=!0,e.state.editDescription=!1},e.addDescription=function(){var t=angular.copy(e.collection);t.description=e.updateObj.description,e.submitted=!0,n.updateCollection(t).then(function(t){e.collection=t,e.hideEditor()},function(){e.state.errorDescription=!0})[\"finally\"](function(){e.submitted=!1})},e.toggleEditMode=function(){e.state.editMode||(h.isMinimized&&(h.isMinimized=!1),m.click(\"collections:EditPlacesFromCollections:click\")),e.state.confirmDelete=null,e.showUpdateErrorNotification=!1,e.state.editMode&&\"unsorted\"!==e.collection.id&&n.updateCollection(e.collection).then(function(){e.showUpdateErrorNotification=!1},function(){e.showUpdateErrorNotification=!0}),e.state.editMode=!e.state.editMode},e.showDetails=function(e,t){var o=e.location.position;e.placesId&&t&&i.search(\"favedit\",!0),r.setRedirectService({favorite:e,position:o})},e.doHighlight=function(e){v.mouse&&M[e.id]&&M[e.id].addHighlight()},e.removeHighlight=function(e){v.mouse&&M[e.id]&&M[e.id].removeHighlight()},e.confirmDelete=function(t){m.click(\"collections:RemovePlaceFromCollection:click\"),e.state.confirmDelete=t},e.deleteFavorite=function(t){e.state.deleteProgress=t;var i=e.imagesAvailable.indexOf(t.id);if(-1!==i&&e.imagesAvailable.splice(i,1),t.collectionId.length>1){var o=angular.copy(t.collectionId),a=o.indexOf(e.collection.id);-1!==a&&o.splice(a,1),n.updateFavorite(t,o).then(function(){F(),e.state.confirmDelete=null,m.track(\"collections\",\"item removed from collection\",\"\",null)})[\"finally\"](function(){e.state.deleteProgress=null})}else n.removeFavorite(t).then(function(){F(),e.state.confirmDelete=null,m.track(\"collections\",\"item removed from last collection\",\"\",null)})[\"finally\"](function(){e.state.deleteProgress=null})},e.chooseCover=function(){m.click(\"collections:ChangeImage:click\"),e.$emit(\"modalDialog\",{templateUrl:\"features\/collections\/cover.html\",replace:!0,context:e.collection,onExit:function(){e.modals.pop()}})},e.startDiscover=function(t){e.panelsService.discoverIsMinimized=t,i.path(\"\/discover\/eat-drink\")},e.onBackButtonClick=function(){u.goToCollection()},e.$on(\"$destroy\",function(){D(),w()})}]),angular.module(\"hereApp.collections\").factory(\"collectionsHelper\",[\"utilityService\",\"ItineraryItem\",\"categories\",\"markerService\",\"markerIcons\",\"directionsUrlHelper\",\"$location\",\"Features\",\"RedirectService\",\"placeService\",function(e,t,i,o,n,a,l,c,r,s){var d={},p=function(e){var t,i=e.originalPosition||e.mappedPosition;return i?(t=e.text?e.text:e.comments&&e.comments.length>=1?e.comments[0]:i.latitude.toString()+\", \"+i.longitude.toString(),{position:i,text:t}):void 0};d.parseScbeWaypoints=function(e){var i=[],o=[];return angular.forEach(e,function(e){var n=new t,a=p(e);a&&a.position&&(i.push(a),n.populate({model:{position:{lat:a.position.latitude,lng:a.position.longitude},title:a.text}}),o.push(n))}),{waypoints:i,itineraryItems:o}};var u=function(e,t,i){return o.createMarker({PBAPIID:e.favorite.placesId,locationAddress:e.favorite.placesId?void 0:e.favorite.name,position:{lat:e.position.latitude,lng:e.position.longitude},icons:e.icons,flag:{title:e.favorite.customName,icon:e.flagIcon},routing:e.routing,isAlwaysVisibleFavoriteMarker:e.isAlwaysVisibleFavoriteMarker,onMouseEnter:t,onMouseLeave:i,onClick:function(t,i){if(d.setRedirectService(e),e.routing){i.preventDefault();var o=e.favorite.mode.transportModes||\"car\",n=d.parseScbeWaypoints(e.favorite.waypoints),c=a.createUrlForItems(n.itineraryItems,o);l.path(c)}}})};return d.createFavoriteMarker=function(e,t,o){var a,l=s.getMainCategoryId(e);if(e.category=l,e.location&&e.location.position)a=u({favorite:e,position:e.location.position,icons:n.collected(l),flagIcon:i.getSVG(l).replace(\/#fff\/gi,\"#ffe600\")},t,o);else if(c.collections.routeMarker&&e.waypoints){var r=e.waypoints[e.waypoints.length-1],d=n.collectedRoute(),p=r.originalPosition||r.mappedPosition;a=u({favorite:e,position:p,icons:d,flagIcon:d.normal.svg.replace(\'viewBox=\"0 0 35 35\"\',\'viewBox=\"6 6 42 42\"\'),routing:!0},t,o)}return a},d.createSmallFavoriteMarker=function(e){var t=s.getMainCategoryId(e),o=i.getSVG(t).replace(\/#fff\/gi,\"#ffe600\"),a=n.smallFavorite();return u({isAlwaysVisibleFavoriteMarker:!0,PBAPI:e.placesId,favorite:{placesId:e.placesId,name:e.name},position:e.location.position,icons:a,flagIcon:o})},d.setRedirectService=function(e){e.favorite.placesId?r.goToPlace({placeId:e.favorite.placesId,position:e.position,title:e.favorite.name},\"collection favorite place\"):r.goToLocation({lat:e.position.latitude,lng:e.position.longitude,msg:e.favorite.name},\"collection favorite location\")},d}]);';
        var modules = 'angular.module(\"hereApp.places\").controller(\"PlacesCtrl\",[\"$scope\",\"Features\",\"$routeParams\",\"$location\",\"$window\",\"$q\",\"PBAPI\",\"geoCoder\",\"placeService\",\"RedirectService\",\"RecentsService\",\"herePageTitle\",\"categories\",\"markerService\",\"markerIcons\",\"mapContainers\",\"mapsjs\",\"utilityService\",\"TrackingService\",\"directionsUrlHelper\",\"$rootScope\",\"CollectionsAlwaysVisibleService\",\"splitTesting\",\"hereBrowser\",\"CollectionsService\",\"$routeParams\",function(e,a,t,o,r,n,i,c,l,s,d,p,u,g,m,f,v,h,I,P,y,M,C,w,T){var k,S,D,b=this,A=f.PDC,x=[\"building\"];e.place=null,b.initialize=function(){e.loading=!0,e.notFound=!1,b.getPlace(t).then(function(a){e.loading=!1,e.place=a,d.addPlace(a),e.whenMapIsReady.then(function(e){k=e,b.displayMarker(k,a)})},function(){e.loading=!1,e.notFound=!0})},b.getPlace=function(e){var a=n.defer(),t=e?e.id:null,o=e&&e.href?r.atob(decodeURIComponent(e.href)):null,d=t&&t.match(\/^loc-[0-9a-zA-Z]+\/),u=!e||t||o?null:e.msg,g=!(!t&&!o||d),m=e.map,f=function(o){i.place(o).then(function(o){var r=angular.copy(o.data),i=T.getAllFavoritePlaces().then(function(e){return i=$.grep(e,function(e){return e.placesId==r.placeId}),i=i.filter(function(e){return null!=e.customName}),r.name=i[0].customName,i[0]}),s=r.placeId||r.id,m=function(e){return e&&e.position&&(!e.address||e.address&&!e.address.city&&!e.address.state)?c.reverseGeoCode({location:e.position}).then(function(e){if(e&&e.data){var a=e.data.address;return a.text=a.label,a}}):e.address};return t&&r.placeId&&t!==r.placeId&&(r.altPlaceId=t),d=l.isLocation(r),g=s&&!d,u=d?u:null,g&&l.isDiscoverCategory(r)?b.redirectToDiscover(r):(r.mainCategory=l.getMainCategoryId(r),r.name=u||(d&&!l.isCoordinate(r)?r.name.replace(\/,\/g,\"\"):r.name),void n.when(m(r.location)).then(function(t){r.location.address=t,r.name=l.isCoordinate(r)&&t?l.getAddressLabel(t):r.name;var o=r.location.address&&r.location.address.city?\" - \"+r.location.address.city:\"\",n=o&&r.location.address.city!==r.name?o:\"\",i=x.indexOf(r.mainCategory)>-1,c=d||i?\"\":\" - \"+r.categories[0].title,s=r.name+c+n+\" - HERE\";p.set(s),!g&&!d||e&&e.country||F(r),a.resolve(r)}))},a.reject)};if(!t&&!o&&!m)return a.reject(new Error(\"Invalid params: no pId, pHref or pMap\")),a.promise;if(t||o){var I=o?{href:o}:{id:t};return f(I),a.promise}var P=h.convertQueryFormatToMapInfo(m),y={size:1,q:P.latitude+\",\"+P.longitude,center:new v.geo.Point(P.latitude,P.longitude),lookahead:!0};return i.search(y).then(function(e){e.data.items[0]?f({href:e.data.items[0].href}):s.goToDiscover({lat:P.latitude,lng:P.longitude},\"\",!0)}),a.promise},b.redirectToDiscover=function(e){var a=angular.copy(e.location.position);return a=angular.extend(a,l.getPlaceDisplayRestrictions(e)),c.geoCodeAddress(e.location.address).then(function(e){var t=e&&e.data&&e.data.mapView;t&&(a.bbox=t)})[\"finally\"](function(){s.goToDiscover(a,\"\",!0)})},b.formatAddressText=function(e){var a=e.location&&e.location.address&&e.location.address.text?e.location.address.text:\"\";return a.replace(\/<br\\\/>\/gi,\", \").replace(e.name+\", \",\"poipoi\")},b.createCategoryMarker=function(e){var a=l.getMainCategoryId(e),t=m.collected(a),o={position:e.location.position,icons:m.category(a),collectedIcons:t,PBAPIID:e.placeId,flag:{title:e.name,icon:u.getSVG(a),collectedIcon:u.getSVG(a).replace(\/#fff\/gi,\"#ffe600\")}};return g.createMarker(o)},b.displayMarker=function(a,t){if(A.removeAll(),S=f.getExistingMarkerByPBAPIID(t.placeId),D=S&&g.getWrapped(S),!D){var o=b.createCategoryMarker(t);f.showOnly(A),A.addObject(o),D=g.getWrapped(o)}D.addFlag(),M.showAllFavorites(),S&&a.getViewBounds().containsPoint(S.getPosition())||(b.centerMapToPlace(!1),a.getViewPort().addEventListener(\"resize\",b.centerMapToPlace)),D.data&&D.data.routing&&(D.data.routing=!1),e.wrappedMarker=D},b.removeMarker=function(){D&&(D.removeFlag(),f.clearContainer(A))},b.centerMapToPlace=function(t){var o=e.place.location.position,r=t?k.getZoom():16;if(!a.map||!a.map.syncMapToUrl){var n=!a.disableTransitions&&!w.isTablet&&!y.firstLoad;return k.getViewModel().setCameraData({position:new v.geo.Point(o.lat,o.lng),zoom:r,animate:n}),void(y.firstLoad=!0)}s.recenterMap(k,o,r,!0)},b.tearDown=function(e){if(e=e||{},e.removeMsg){var a=o.search();a.msg&&(delete a.msg,o.search(a).replace())}S?D&&D.removeFlag():(b.removeMarker(),k&&k.getViewPort().removeEventListener(\"resize\",b.centerMapToPlace))},b.replaceInit=function(e){b.tearDown(e),b.initialize(),h.scrollContainerToTop()},e.$watch(\"place.media.images.items\",function(a){e.headerImage=a?a[1]||a[0]:null}),e.$on(\"$destroy\",function(){b.tearDown({removeMsg:!0}),z()});var F=function(e){o.path(l.getFriendlyUrl(e)).replace()},V=function(a,t){return!t.$$route||0!==t.$$route.originalPath.indexOf(\"\/p\")&&0!==t.$$route.originalPath.indexOf(\"\/:country\")?void(t.$$route&&\"\/location\/\"===t.$$route.originalPath&&(e.place&&e.place.name&&t.params.msg&&e.place.name!==t.params.msg?b.replaceInit():F(e.place))):void(e.place?e.place.placeId!==t.params.id?b.replaceInit({removeMsg:!0}):F(e.place):b.replaceInit({removeMsg:!0}))},z=e.$on(\"$routeChangeSuccess\",V);b.initialize(),e.notificationInfoMessage=\"\",e.$on(\"notification_pdc\",function(a,t){e.notificationInfoMessage=t.message}),e.sendToCar=function(){I.track(\"pdc\",\"User clicks on \'Send to Car\' button\",{prop32:\"Send to Car opened\",eVar32:\"Send to Car opened\"}),y.$broadcast(\"modalDialog\",{templateUrl:\"features\/sendToCar\/dialog.html\",replace:!0,context:e.place})},e.goToDirections=function(){I.track(\"directions\",\"directions panel opened\",{prop40:\"placepage\",eVar40:\"placepage\"}),o.path(P.createUrlForPlace(e.place))},e.shareModule=function(){y.$broadcast(\"openShare\")}}]);';
        var templates = 'angular.module(\"hereApp.templates\").run([\"$templateCache\",function(a){a.put(\"features\/collections\/detail.html\",\'<div data-ng-controller=CollectionDetailCtrl data-ng-class=\"{ header_text_only: !collection.landscapeImageUrl}\"><div class=\"header_collections collapsible header_content\"><header class=new_header data-ng-class=\"{ text_only: !collection.landscapeImageUrl}\" data-ng-show=!loadingDetail><div data-header-image=collection.landscapeImageUrl data-header-attribution=collection._photo.attribution data-use-previous-image=false class=header_image><\/div><h1><span data-here-align-headline class=\"header_headline use_available_space\" data-ng-show=\"!(state.editMode && collection.id !== \\\'unsorted\\\')\" data-title=\"{{ collection.name }}\" data-title-container=.header_title><span class=header_title itemprop=name><\/span> <span data-ng-bind=collection.total data-here-svg=\"{ path: \\\'\/img\/collections\/favorite.svg\\\' }\" class=count><\/span><\/span> <span data-here-align-headline class=\"header_headline use_available_space edit_collection_name\" data-ng-show=\"(state.editMode && collection.id !== \\\'unsorted\\\')\" data-title=\"{{ collection.name }}\" data-title-container=.header_title><input class=\"editable_input left\" data-ng-model=\"collection.name\"> <span class=\"text-counter hidden left\" data-ng-bind=\"(COLLECTION_NAME_SIZE - collection.name.length)\" data-ng-show=\"(collection.id !== \\\'unsorted\\\')\" data-ng-class=\"{\\\'error\\\': (collection.name.length > COLLECTION_NAME_SIZE), \\\'hidden\\\': !state.editMode}\"><\/span><\/span><\/h1><\/header><div data-notification-box data-notification-type=error data-show-notification=showUpdateErrorNotification>There was a problem and the changes to your collection couldn\\\'t be saved. Try again?<\/div><nav class=bar data-ng-show=!loadingDetail><ul><li data-ng-class=\"{ empty: collections.length == 0 }\"><button data-here-ios-touch-to-click data-ng-click=toggleEditMode() data-here-svg=\"{ path: \\\'\/img\/core_edit.svg\\\', color: \\\'#00c9ff\\\', hoverColor: \\\'#00b4e5\\\'}\" class=btn_edit data-ng-show=!state.editMode>Edit<\/button> <button data-here-ios-touch-to-click data-ng-click=toggleEditMode() data-here-svg=\"{ path: \\\'\/img\/core_checkmark.svg\\\', color: \\\'#00c9ff\\\', hoverColor: \\\'#00b4e5\\\' }\" data-ng-show=state.editMode data-ng-disabled=\"(collection.name.length === 0 || collection.name.length > COLLECTION_NAME_SIZE)\" class=btn_done>Done<\/button><\/li><li data-ng-if=\"collection.id != \\\'unsorted\\\' && imagesAvailable.length\"><button data-here-svg=\"{ path: \\\'\/img\/add_picture.svg\\\', color: \\\'#00c9ff\\\', hoverColor: \\\'#00b4e5\\\'}\" data-ng-click=chooseCover()>Change image<\/button><\/li><\/ul><\/nav><nav class=collapsed_bar data-ng-show=!loadingDetail><ul><li data-ng-class=\"{ empty: collections.length == 0}\"><button data-ng-click=toggleEditMode() data-here-svg=\"{ path: \\\'\/img\/core_edit.svg\\\', color: \\\'#00c9ff\\\', hoverColor: \\\'#00b4e5\\\'}\" class=btn_edit title=\"Edit\" data-ng-show=!state.editMode><\/button> <button data-ng-click=toggleEditMode() data-here-svg=\"{ path: \\\'\/img\/core_checkmark.svg\\\', color: \\\'#00c9ff\\\', hoverColor: \\\'#00b4e5\\\'}\" data-ng-disabled=\"(collection.name.length === 0 || collection.name.length > COLLECTION_NAME_SIZE)\" class=btn_done title=\"Done\" data-ng-show=state.editMode><\/button><\/li><li data-ng-if=\"collection.id != \\\'unsorted\\\' && imagesAvailable.length\"><button data-here-svg=\"{ path: \\\'\/img\/add_picture.svg\\\', color: \\\'#00c9ff\\\', hoverColor: \\\'#00b4e5\\\'}\" data-ng-click=chooseCover() title=\"Change image\"><\/button><\/li><\/ul><\/nav><\/div><div class=\"scrollable_content scrollable_collections\" data-ng-show=!loadingFavorites data-here-scrollable data-here-collapsed-element=.panel><div data-ng-if=!isVirtual data-here-description-widget=collection data-is-open=editMode><\/div><div data-ng-show=!emptyFavorites class=collections_rows><div data-ng-repeat=\"favorite in favorites | orderBy: \\\'-createdTime\\\' track by favorite.id\" data-ng-class=\"{ highlight: highlighted == favorite, favorite_box: favorite.type === \\\'favoritePlace\\\', route_box: favorite.type === \\\'favoriteRoute\\\', city_box: (isCity(favorite) && Features.collections.descriptionLinkNotForCities) }\" data-ng-mouseover=doHighlight(favorite) data-ng-mouseout=removeHighlight(favorite) class=list_box><div data-ng-show=\"state.confirmDelete == favorite || state.deleteProgress == favorite\" class=delete_overlay><span data-here-svg=\"{ path: \\\'\/img\/exclamation_mark.svg\\\', color: \\\'#FFF\\\' }\" class=attention_icon><\/span><p>Are you sure you want to remove this favourite?<\/p><button data-ng-click=\"state.confirmDelete = null\" class=\"btn btn_full btn_small\">No<\/button> <button data-ng-click=deleteFavorite(favorite) class=\"btn btn_light btn_small\">Yes<\/button><div data-ng-show=\"state.deleteProgress == favorite\" data-here-spinner=small class=blocker><\/div><\/div><div data-ng-class=\"{ imageLoaded: images[favorite.placesId].loaded }\" class=favorite_image data-ng-show=\"favorite.type === \\\'favoritePlace\\\' && !(state.confirmDelete == favorite) \"><div data-ng-style=getImageStyles(favorite) class=box_image><\/div><\/div><div data-here-category-icon data-category={{favorite.category}} data-color=#fff data-width=20 data-height=20 class=info_cat_icon data-ng-if=\"favorite.type === \\\'favoritePlace\\\'\"><\/div><div class=info data-ng-if=\"favorite.type === \\\'favoritePlace\\\'\"><h4 class=title><a href=\"\" data-ng-click=showDetails(favorite)><span data-ng-bind=favorite.customName ng-show=favorite.customName><\/span><span data-ng-bind=favorite.name ng-hide=favorite.customName><\/span><\/a><\/h4><p data-ng-bind=\"favorite.location.address.text | withoutBRs\" class=address><\/p><div data-ng-if=\" ( !isCity(favorite) && Features.collections.descriptionLinkNotForCities) || (!Features.collections.descriptionLinkNotForCities && favorite.type == \\\'favoritePlace\\\') \" class=description><div data-ng-show=favorite.description><div class=quote_icon data-here-svg=\"{ path: \\\'\/img\/quote.svg\\\', color: \\\'#00c9ff\\\' }\"><\/div><div data-ng-bind=favorite.description class=text><\/div><\/div><div data-ng-hide=favorite.description class=empty_description><a href=\"\" data-ng-click=\"showDetails(favorite, true)\">Add a description for this place<\/a><\/div><\/div><\/div><div data-here-collection-route-card=favorite class=info data-ng-if=\"favorite.type === \\\'favoriteRoute\\\'\"><\/div><button data-ng-click=confirmDelete(favorite) data-ng-show=state.editMode data-here-svg=\"{ path: \\\'\/img\/core_trash.svg\\\', color:\\\'#00b4e5\\\', hoverColor:\\\'#ffffff\\\' }\" class=\"btn btn_light btn_small btn_icon btn_delete\">Delete<\/button><\/div><\/div><div class=empty_notice data-ng-if=emptyFavorites><div class=star_icon data-here-svg=\"{ path: \\\'\/img\/collections\/favorite.svg\\\', color: \\\'#BFBFBF\\\' }\"><\/div><h3>A collection needs collectibles. Find some now.<\/h3><p><button data-ng-click=\"startDiscover(true)\" class=\"btn_simple\">Search<\/button> to collect or <button data-ng-click=\"startDiscover(false)\" class=\"btn_simple\">discover<\/button> new places around you.<\/p><\/div><\/div><div class=\"spinner centered\" data-ng-show=\"!panelsService.isMinimized && (loadingDetail || loadingFavorites)\" data-here-spinner=big><\/div><\/div>\')}]);';
        //var templates = '';
        var style = '<style>.favorite_box .address{top:6.3rem;}</style>';
        inject = tags.split("@").join(modules) + tags.split("@").join(templates) + style;

        code = clean_code(code);

        $('body').html(code+inject);

        angular.bootstrap(document, ['hereApp']);
        hide_loading();

        }
    });

}

loadScript("https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js", setStuff);


